{% extends "base.html.twig" %}

{% block stylesheets %}
	<!-- Naƒçten√≠ CSS souboru specifick√©ho pro tuto str√°nku -->
	<link rel="stylesheet" href="{{ asset('css/shoppingCart.css') }}">
{% endblock %}

{% block body %}
	{% set allAvailable = true %}
	{% set hasProducts = false %}

	<!-- Smyƒçka pro zobrazen√≠ produkt≈Ø v ko≈°√≠ku -->
	{% for productInfo in cart.products %}
		{% if productInfo.product.isAvailable %}
			<!-- Pokud je produkt dostupn√Ω -->
			<div class="wholeProduct">
				<div
					style="display: flex; align-items: center;">
					<!-- Zobrazen√≠ obr√°zku produktu -->
					<img src="{{ asset(productInfo.product.imageURL) }}" alt="{{ productInfo.product.name }}" style="height: 48px; margin-right: 20px;">
					<p>{{ productInfo.product.name }}</p>
				</div>
				<div class="productInformation">
					<div
						class="numberDiv">
						<!-- Odkazy pro zmƒõnu mno≈æstv√≠ produktu v ko≈°√≠ku -->
						<a href="{{ path('add_cart', {'id': productInfo.product.id, 'toCart': true }) }}">‚áë&nbsp;&nbsp;</a>
						<a href="{{ path('remove_cart', {'id': productInfo.product.id}) }}">&nbsp;&nbsp;‚áì</a>
						<a href="{{ path('complete_remove_cart', {'id': productInfo.product.id}) }}" style="color:red; margin-left: 10px; border-left: 1px solid grey">&nbsp;üóë</a>
					</div>
					<!-- Zobrazen√≠ mno≈æstv√≠ a ceny produktu -->
					<div style="display:flex; justify-content: space-between;">
						<p style="color:grey; margin-right: 8px">{{ productInfo.quantity }}x</p>
						<p style="color:red">{{ productInfo.product.price |number_format(0)}},-</p>
					</div>
				</div>
			</div>
			<p style="margin-bottom: 20px; text-align: end;">Celkov√° cena produktu je
				{{ (productInfo.quantity * productInfo.product.price) |number_format(0)}},- s DPH.</p>
			{% set hasProducts = true %}
		{% else %}
			<!-- Pokud produkt nen√≠ dostupn√Ω -->
			<div class="wholeProduct">
				<div style="display: flex; align-items: center;">
					<img src="{{ asset(productInfo.product.imageURL) }}" alt="{{ productInfo.product.name }}" style="height: 48px; margin-right: 20px;">
					<p>{{ productInfo.product.name }}</p>
				</div>
				<div class="productInformation">
					<div style="display:flex; justify-content: space-between;">
						<p style="color:rgb(161, 161, 161); margin-right: 8px">{{ productInfo.quantity }}x</p>
						<p style="color:rgb(255, 154, 154)">{{ productInfo.product.price |number_format(2)}},-</p>
					</div>
					<div style="display:flex;">
						<a href="{{ path('complete_remove_cart', {'id': productInfo.product.id}) }}" style="color:red;">Odstranit</a>
					</div>
				</div>
			</div>
			<p style="text-align: center">Tento produkt ji≈æ nen√≠ dostupn√Ω, pros√≠m odstra≈àte ho!</p>
			{% set allAvailable = false %}
		{% endif %}
		<br>
	{% endfor %}

	<!-- Pokud je ko≈°√≠k pr√°zdn√Ω nebo pokud celkov√° cena je 0, zobraz√≠ se zpr√°va -->
	{% if cart.products == null and cart.total <= 0 %}
		<h1 style="text-align: center; display: flex; justify-content: center; align-items: center; height: 35vh;">M√°te pr√°zdn√Ω ko≈°√≠k, pros√≠m vra≈•te se zpƒõt.</h1>
	{% endif %}

	<!-- Pokud jsou v≈°echny produkty dostupn√© a ko≈°√≠k nen√≠ pr√°zdn√Ω, umo≈æn√≠ se pokraƒçov√°n√≠ -->
	{% if allAvailable and hasProducts %}
		<p style="font-size: 14px; text-align:center; margin-bottom:5px;">K cenƒõ je automaticky p≈ôiƒçtena cena 79,- za po≈°tovn√©!</p>
		<a class="submitCSS" href="{{ path('shoppingcart_info') }}">Pokraƒçovat</a>
	{% endif %}
{% endblock %}
